{"ast":null,"code":"var _jsxFileName = \"/home/meparth/kn-projekt/Frontend/src/Components/Upgrade/Dropdown/CardHolder.js\";\nimport React from 'react';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport { conf } from '../../../conf/conf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CardHolder = props => {\n  const handleStripeSubmit = async () => {\n    const {\n      stripe,\n      elements\n    } = props;\n    if (!stripe || !elements) {\n      // Stripe.js has not yet loaded.\n      // Make sure to disable form submission until Stripe.js has loaded.\n      return;\n    }\n    const res = await axios.post(conf.endPoint + \"/api/api/pay\", {\n      price: props.step == \"Monthly\" ? props.monthly : props.anually\n    });\n    const clientSecret = res.data['client_secret'];\n    const time = res.data[\"server_time\"];\n    const result = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: props.name\n        }\n      }\n      // receipt_email: \"ja3tar@gmail.com\"\n    });\n\n    if (result.error) {\n      // Show error to your customer (e.g., insufficient funds)\n      alert(\"Error\");\n      console.log(result.error.message);\n    } else {\n      // The payment has been processed!\n      if (result.paymentIntent.status === 'succeeded') {\n        // console.log(\"adding subscription\");       \n        axios.post(conf.endPoint + \"/api/auth/subscription\", {\n          data: {\n            duration: props.step,\n            amount: props.selectedPrice,\n            plan: \"Monthly\"\n          }\n        }, {\n          withCredentials: true\n        }).then(resp => {});\n        setTimeout(() => {\n          window.location.href = \"/members/settings\";\n        }, 7000);\n\n        // this.setState({ step: 0 })\n        // Show a success message to your customer\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"postalcode__right-body\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: event => {\n        props.handleInput(\"Full Name\", event.target.value);\n      },\n      placeholder: \"Full Name\",\n      className: \"pstalcode__input\",\n      value: props.fullName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: event => {\n        props.handleInput(\"Address\", event.target.value);\n      },\n      placeholder: \"Address\",\n      className: \"pstalcode__input\",\n      value: props.address\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CardElement, {\n      className: \"pstalcode__input\",\n      options: {\n        style: {\n          base: {\n            fontSize: '16px',\n            color: '#424770',\n            '::placeholder': {\n              color: '#aab7c4'\n            }\n          },\n          invalid: {\n            color: '#9e2146'\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"postalecode__action\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: event => handleStripeSubmit(event),\n        className: \"postalcode__btn\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: () => props.setstep(1),\n        className: \"postalcode__btn-outlined\",\n        children: \"Return\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_c = CardHolder;\nexport default CardHolder;\nvar _c;\n$RefreshReg$(_c, \"CardHolder\");","map":{"version":3,"names":["React","CardElement","axios","conf","jsxDEV","_jsxDEV","CardHolder","props","handleStripeSubmit","stripe","elements","res","post","endPoint","price","step","monthly","anually","clientSecret","data","time","result","confirmCardPayment","payment_method","card","getElement","billing_details","name","error","alert","console","log","message","paymentIntent","status","duration","amount","selectedPrice","plan","withCredentials","then","resp","setTimeout","window","location","href","className","children","onChange","event","handleInput","target","value","placeholder","fullName","fileName","_jsxFileName","lineNumber","columnNumber","address","options","style","base","fontSize","color","invalid","onClick","setstep","_c","$RefreshReg$"],"sources":["/home/meparth/kn-projekt/Frontend/src/Components/Upgrade/Dropdown/CardHolder.js"],"sourcesContent":["import React from 'react'\r\nimport { CardElement} from '@stripe/react-stripe-js';\r\nimport axios from 'axios'\r\nimport {conf} from '../../../conf/conf'\r\nconst CardHolder = (props) => {\r\n\r\n\r\n    \r\n   const handleStripeSubmit = async () => {\r\n    const { stripe, elements } = props;\r\n    if (!stripe || !elements) {\r\n        // Stripe.js has not yet loaded.\r\n        // Make sure to disable form submission until Stripe.js has loaded.\r\n        return;\r\n    }\r\n    const res = await axios.post( conf.endPoint + \"/api/api/pay\", {  price: props.step == \"Monthly\" ? props.monthly : props.anually});\r\n    const clientSecret = res.data['client_secret'];\r\n    const time = res.data[\"server_time\"]\r\n    const result = await stripe.confirmCardPayment(clientSecret, {\r\n        payment_method: {\r\n            card: elements.getElement(CardElement),\r\n            billing_details: {\r\n                name: props.name\r\n            },\r\n        },\r\n        // receipt_email: \"ja3tar@gmail.com\"\r\n    });\r\n    if (result.error) {\r\n        // Show error to your customer (e.g., insufficient funds)\r\n        alert(\"Error\")\r\n        console.log(result.error.message);\r\n    } else {\r\n        // The payment has been processed!\r\n        if (result.paymentIntent.status === 'succeeded') {\r\n        // console.log(\"adding subscription\");       \r\n        axios.post(conf.endPoint+\"/api/auth/subscription\",{data:{ duration:props.step,amount:props.selectedPrice,plan:\"Monthly\"}},{withCredentials:true}).then((resp)=>{\r\n        })   \r\n\r\n        setTimeout(() => {\r\n            window.location.href = \"/members/settings\"\r\n        }, 7000);\r\n\r\n           // this.setState({ step: 0 })\r\n            // Show a success message to your customer\r\n        }\r\n    }\r\n};\r\n\r\n    return (\r\n        <div className=\"postalcode__right-body\">\r\n        <input onChange={(event) => { props.handleInput(\"Full Name\", event.target.value) }} placeholder='Full Name' className=\"pstalcode__input\" value={props.fullName} />\r\n        <input onChange={(event) => { props.handleInput(\"Address\", event.target.value) }} placeholder='Address'  className=\"pstalcode__input\" value={props.address} />\r\n        <CardElement\r\n           className=\"pstalcode__input\"\r\n\r\n            options={{\r\n            \r\n                style: {\r\n                    base: {\r\n                        \r\n                        fontSize: '16px',\r\n                        color: '#424770',\r\n                        '::placeholder': {\r\n                            color: '#aab7c4',\r\n                            \r\n                        },\r\n                    },\r\n                    invalid: {\r\n                        color: '#9e2146',\r\n                    },\r\n                },\r\n            }}\r\n        />\r\n\r\n        <div className=\"postalecode__action\">\r\n            <a onClick={(event) => handleStripeSubmit(event)} className=\"postalcode__btn\">Checkout</a>\r\n            <a onClick={() => props.setstep(1)} className=\"postalcode__btn-outlined\">Return</a>\r\n        </div>\r\n\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default CardHolder\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAO,yBAAyB;AACpD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,IAAI,QAAO,oBAAoB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACvC,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAI3B,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACtC,MAAM;MAAEC,MAAM;MAAEC;IAAS,CAAC,GAAGH,KAAK;IAClC,IAAI,CAACE,MAAM,IAAI,CAACC,QAAQ,EAAE;MACtB;MACA;MACA;IACJ;IACA,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,IAAI,CAAET,IAAI,CAACU,QAAQ,GAAG,cAAc,EAAE;MAAGC,KAAK,EAAEP,KAAK,CAACQ,IAAI,IAAI,SAAS,GAAGR,KAAK,CAACS,OAAO,GAAGT,KAAK,CAACU;IAAO,CAAC,CAAC;IACjI,MAAMC,YAAY,GAAGP,GAAG,CAACQ,IAAI,CAAC,eAAe,CAAC;IAC9C,MAAMC,IAAI,GAAGT,GAAG,CAACQ,IAAI,CAAC,aAAa,CAAC;IACpC,MAAME,MAAM,GAAG,MAAMZ,MAAM,CAACa,kBAAkB,CAACJ,YAAY,EAAE;MACzDK,cAAc,EAAE;QACZC,IAAI,EAAEd,QAAQ,CAACe,UAAU,CAACxB,WAAW,CAAC;QACtCyB,eAAe,EAAE;UACbC,IAAI,EAAEpB,KAAK,CAACoB;QAChB;MACJ;MACA;IACJ,CAAC,CAAC;;IACF,IAAIN,MAAM,CAACO,KAAK,EAAE;MACd;MACAC,KAAK,CAAC,OAAO,CAAC;MACdC,OAAO,CAACC,GAAG,CAACV,MAAM,CAACO,KAAK,CAACI,OAAO,CAAC;IACrC,CAAC,MAAM;MACH;MACA,IAAIX,MAAM,CAACY,aAAa,CAACC,MAAM,KAAK,WAAW,EAAE;QACjD;QACAhC,KAAK,CAACU,IAAI,CAACT,IAAI,CAACU,QAAQ,GAAC,wBAAwB,EAAC;UAACM,IAAI,EAAC;YAAEgB,QAAQ,EAAC5B,KAAK,CAACQ,IAAI;YAACqB,MAAM,EAAC7B,KAAK,CAAC8B,aAAa;YAACC,IAAI,EAAC;UAAS;QAAC,CAAC,EAAC;UAACC,eAAe,EAAC;QAAI,CAAC,CAAC,CAACC,IAAI,CAAEC,IAAI,IAAG,CAC/J,CAAC,CAAC;QAEFC,UAAU,CAAC,MAAM;UACbC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,mBAAmB;QAC9C,CAAC,EAAE,IAAI,CAAC;;QAEL;QACC;MACJ;IACJ;EACJ,CAAC;;EAEG,oBACIxC,OAAA;IAAKyC,SAAS,EAAC,wBAAwB;IAAAC,QAAA,gBACvC1C,OAAA;MAAO2C,QAAQ,EAAGC,KAAK,IAAK;QAAE1C,KAAK,CAAC2C,WAAW,CAAC,WAAW,EAAED,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;MAAC,CAAE;MAACC,WAAW,EAAC,WAAW;MAACP,SAAS,EAAC,kBAAkB;MAACM,KAAK,EAAE7C,KAAK,CAAC+C;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,eAClKrD,OAAA;MAAO2C,QAAQ,EAAGC,KAAK,IAAK;QAAE1C,KAAK,CAAC2C,WAAW,CAAC,SAAS,EAAED,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;MAAC,CAAE;MAACC,WAAW,EAAC,SAAS;MAAEP,SAAS,EAAC,kBAAkB;MAACM,KAAK,EAAE7C,KAAK,CAACoD;IAAQ;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,eAC9JrD,OAAA,CAACJ,WAAW;MACT6C,SAAS,EAAC,kBAAkB;MAE3Bc,OAAO,EAAE;QAELC,KAAK,EAAE;UACHC,IAAI,EAAE;YAEFC,QAAQ,EAAE,MAAM;YAChBC,KAAK,EAAE,SAAS;YAChB,eAAe,EAAE;cACbA,KAAK,EAAE;YAEX;UACJ,CAAC;UACDC,OAAO,EAAE;YACLD,KAAK,EAAE;UACX;QACJ;MACJ;IAAE;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACJ,eAEFrD,OAAA;MAAKyC,SAAS,EAAC,qBAAqB;MAAAC,QAAA,gBAChC1C,OAAA;QAAG6D,OAAO,EAAGjB,KAAK,IAAKzC,kBAAkB,CAACyC,KAAK,CAAE;QAACH,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAAQ;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAI,eAC1FrD,OAAA;QAAG6D,OAAO,EAAEA,CAAA,KAAM3D,KAAK,CAAC4D,OAAO,CAAC,CAAC,CAAE;QAACrB,SAAS,EAAC,0BAA0B;QAAAC,QAAA,EAAC;MAAM;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAI;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACjF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAEJ;AAEV,CAAC;AAAAU,EAAA,GA7EK9D,UAAU;AA+EhB,eAAeA,UAAU;AAAA,IAAA8D,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}