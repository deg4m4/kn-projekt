{"ast":null,"code":"var _jsxFileName = \"/home/meparth/kn-projekt/Frontend/src/Components/Editor/Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './Editor.scss';\nimport Sidebar from './Sidebar';\n// Konva\nimport { Stage, Layer, Text, Line } from 'react-konva';\nimport { returnElements } from './utils';\nimport WebFont from 'webfontloader';\n// Lottie\nimport Modal from \"./Modal/Modal\";\n// Handling key press \nimport useKeypress from 'react-use-keypress';\nimport ElementConfig from './ElementConfig';\nimport ZoomController from './ZoomController/ZoomController';\nimport downloadjs from 'downloadjs';\nimport { useParams } from 'react-router';\nimport { conf } from '../../conf/conf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = props => {\n  _s();\n  // Editor initalisation \n  let {\n    id\n  } = useParams();\n  ////// Refs \n  const stageRef = React.useRef();\n  const layerRef = React.useRef();\n  const LoadingRef = React.useRef();\n  ////// States\n  const [isDragging, setIsDragging] = useState(false);\n  const [selectedId, setSelectedId] = useState(null);\n  const [selectedColor, setselectedColor] = useState(\"black\");\n  const [selectedLockedStatus, setselectedLockedStatus] = useState(false);\n  const [zoom, setzoom] = useState(60);\n  const [selectedElementArrayIndex, setSelectedElementArrayIndex] = useState(null);\n  const [stageDimensions, setStageDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  const [XGuideLines, setXguideLines] = useState([]);\n  const [xSnapPoints, setxSnapPoints] = useState([]);\n  const [elements, setElements] = useState([]);\n  const [isMobileShowed, setisMobileShowed] = useState(false);\n  const [isImportShowed, setisImportShowed] = useState(false);\n  const [selectedTemplatePlan, setselectedTemplatePlan] = useState();\n  // Modals\n  const [isModalShowed, setisModalShowed] = useState(false);\n  const [isAddImageShowed, setisAddImageShowed] = useState(false);\n  const [isExportShowed, setIsExportShowed] = useState(false);\n  const sizes = {\n    fbPost: {\n      width: 1200,\n      height: 630\n    },\n    twPost: {\n      width: 1200,\n      height: 675\n    },\n    inPost: {\n      width: 1080,\n      height: 1080\n    },\n    youtubeThumbnail: {\n      width: 1280,\n      height: 720\n    }\n  };\n  useEffect(() => {\n    // console.log('aralna l user');\n    // console.log(props.user);\n    axios.post(conf.endPoint + \"/api/templates/return/editor\", {\n      data: {\n        name: id.replace(\"_\", ' ')\n      }\n    }, {\n      withCredentials: true\n    }).then(resp => {\n      if (resp.data) {\n        if (resp.data.status == false) {\n          setIsExportShowed(true);\n          setselectedTemplatePlan('Premium');\n        } else {\n          setselectedTemplatePlan(resp.data.plan);\n        }\n        loadFromJson(JSON.parse(resp.data.json));\n        switch (resp.data.platform) {\n          case \"Facebook Post\":\n            setStageDimensions({\n              width: sizes.fbPost.width,\n              height: sizes.fbPost.height\n            });\n            setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]]);\n            break;\n          case \"Instagram Post\":\n            setStageDimensions({\n              width: sizes.inPost.width,\n              height: sizes.inPost.height\n            });\n            setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]]);\n            break;\n          case \"Twitter Post\":\n            setStageDimensions({\n              width: sizes.twPost.width,\n              height: sizes.twPost.height\n            });\n            setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]]);\n            break;\n          case \"Youtube Thumbnail\":\n            setStageDimensions({\n              width: sizes.youtubeThumbnail.width,\n              height: sizes.youtubeThumbnail.height\n            });\n            setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]]);\n            break;\n          case \"Custom\":\n            var dim = resp.data.size.split('x');\n            setStageDimensions({\n              width: dim[0],\n              height: dim[1]\n            });\n            setxSnapPoints([...[0, dim[0] / 2, dim[0]]]);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n    //  loadFromJson([{\"id\":7513,\"type\":\"path\",\"x\":576.65959092502,\"y\":139.7537890521899,\"width\":50,\"height\":50,\"scaleX\":1.5313825642263001,\"scaleY\":1.5313825642262986,\"fill\":\"rgba(255,207,67,1)\",\"data\":\"M171.647,2.874L169.3,0L36.582,176.082l-1.414,1.861l142.007,168.378l0.664,0.792l132.685-178.324l1.423-1.853L171.647,2.874z\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"rotation\":-6.103054675504172},{\"id\":243,\"type\":\"path\",\"x\":1406.9999394376464,\"y\":-604.910131004434,\"width\":50,\"height\":50,\"scaleX\":2.3857610598660886,\"scaleY\":2.3857610598660837,\"fill\":\"rgba(255,207,69,1)\",\"data\":\"M171.647,2.874L169.3,0L36.582,176.082l-1.414,1.861l142.007,168.378l0.664,0.792l132.685-178.324l1.423-1.853L171.647,2.874z\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"rotation\":82.07504271837227},{\"id\":3021,\"type\":\"path\",\"x\":520.7322504750741,\"y\":-248.35465754110692,\"width\":50,\"height\":50,\"scaleX\":2.1303857247659774,\"scaleY\":2.130385724765978,\"fill\":null,\"data\":\"M507.52,427.39,282.65,52.62a31.09,31.09,0,0,0-53.31,0L4.48,427.39C-7.95,448.11,7,474.47,31.13,474.47H480.87C505,474.47,520,448.11,507.52,427.39Z\",\"fillPatternImage\":\"/static/media/image1.8d246ba4.jpg\",\"fillPatternOffsetX\":13,\"fillPatternOffsetY\":-248,\"isLocked\":true,\"rotation\":0,\"fillPatternScaleY\":0.4,\"fillPatternScaleX\":0.4},{\"id\":5085,\"type\":\"text\",\"x\":33.33333333333334,\"y\":154.99999999999994,\"width\":275,\"height\":46.66666666666665,\"text\":\"We Are\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":40,\"fontStyle\":400,\"rotation\":0},{\"id\":6054,\"type\":\"text\",\"x\":35.00000000000003,\"y\":201.66666666666674,\"width\":275,\"height\":59.99999999999987,\"text\":\"Digital\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":600,\"rotation\":0},{\"id\":5421,\"type\":\"text\",\"x\":33.33333333333334,\"y\":261.6666666666667,\"width\":348.3333333333334,\"height\":59.99999999999986,\"text\":\"Marketing\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":700,\"rotation\":0,\"fill\":\"rgba(254,204,50,1)\"},{\"id\":3328,\"type\":\"text\",\"x\":35,\"y\":318.33333333333337,\"width\":275,\"height\":59.99999999999987,\"text\":\"Experts\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":600,\"rotation\":0,\"fill\":\"rgba(0,0,0,1)\"},{\"id\":2354,\"type\":\"image\",\"x\":68.33333333333343,\"y\":39.46219929273235,\"src\":\"/static/media/sound-waves.bc89fc35.svg\",\"width\":40.252857818252174,\"height\":40.252857818252174,\"rotation\":0},{\"id\":9462,\"type\":\"text\",\"x\":123.33333333333323,\"y\":45,\"width\":135.0000000000002,\"height\":28.33333333333309,\"text\":\"Agency\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":29,\"fontStyle\":600,\"rotation\":0},{\"id\":351,\"type\":\"rectangle\",\"x\":41.39617789775846,\"y\":397.59745193183886,\"width\":154.90254806816114,\"height\":48.65254806816108,\"fill\":\"rgba(254,204,50,1)\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"opacity\":1,\"rotation\":0},{\"id\":8682,\"type\":\"text\",\"x\":45.00000000000007,\"y\":409.9999999999992,\"width\":148.75000000000003,\"height\":45.41666666666678,\"text\":\"Join us\",\"align\":\"center\",\"fontFamily\":\"Poppins\",\"fontSize\":23,\"fontStyle\":600,\"rotation\":0},{\"id\":8649,\"type\":\"text\",\"x\":37.9583333333332,\"y\":480.0000000000002,\"width\":290.0000000000001,\"height\":45.41666666666677,\"text\":\"www.yourdomain.com\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":20,\"fontStyle\":500,\"rotation\":0}])\n    switch (id) {\n      case \"Facebook_Post\":\n        setStageDimensions({\n          width: sizes.fbPost.width,\n          height: sizes.fbPost.height\n        });\n        setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]]);\n        break;\n      case \"Instagram_Post\":\n        setStageDimensions({\n          width: sizes.inPost.width,\n          height: sizes.inPost.height\n        });\n        setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]]);\n        break;\n      case \"Twitter_Post\":\n        setStageDimensions({\n          width: sizes.twPost.width,\n          height: sizes.twPost.height\n        });\n        setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]]);\n        break;\n      case \"Youtube_Thumbnail\":\n        setStageDimensions({\n          width: sizes.youtubeThumbnail.width,\n          height: sizes.youtubeThumbnail.height\n        });\n        setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]]);\n        break;\n      default:\n        break;\n    }\n  }, []);\n  const handleMenuClick = () => {\n    setisMobileShowed(state => !state);\n  };\n  const loadFromJson = textJson => {\n    var fonts = [];\n    var parsedElements = textJson;\n    setTimeout(() => {\n      setElements([...parsedElements]);\n    }, 800);\n    // After we set template from json we need  to loop throu its fonts and load hem \n    parsedElements.forEach(element => {\n      if (element.type == \"text\") {\n        fonts.push(element.fontFamily);\n      }\n    });\n    if (fonts.length > 0) WebFont.load({\n      google: {\n        families: fonts\n      }\n    });\n  };\n  useKeypress('Delete', () => {\n    removeElementById(selectedId);\n  });\n  const removeElementById = id => {\n    var pos = null;\n    for (let index = 0; index < elements.length; index++) {\n      if (id === elements[index].id) {\n        pos = index;\n      }\n    }\n    if (pos !== null) {\n      var tempArray = elements;\n      tempArray.splice(pos, 1);\n      setElements([...tempArray]);\n    }\n  };\n  // Handle template click and show it \n  const handleTemplateClickEditor = name => {\n    axios.post(conf.endPoint + \"/api/templates/return/editor\", {\n      data: {\n        name: name\n      }\n    }, {\n      withCredentials: true\n    }).then(resp => {\n      if (resp.data.status == false) {\n        setselectedTemplatePlan('Premium');\n        setIsExportShowed(true);\n      }\n      loadFromJson(JSON.parse(resp.data.json));\n      setselectedTemplatePlan(resp.data.plan);\n      switch (resp.data.platform) {\n        case \"Facebook Post\":\n          setStageDimensions({\n            width: sizes.fbPost.width,\n            height: sizes.fbPost.height\n          });\n          setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]]);\n          break;\n        case \"Instagram Post\":\n          setStageDimensions({\n            width: sizes.inPost.width,\n            height: sizes.inPost.height\n          });\n          setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]]);\n          break;\n        case \"Twitter Post\":\n          setStageDimensions({\n            width: sizes.twPost.width,\n            height: sizes.twPost.height\n          });\n          setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]]);\n          break;\n        case \"Youtube Thumbnail\":\n          setStageDimensions({\n            width: sizes.youtubeThumbnail.width,\n            height: sizes.youtubeThumbnail.height\n          });\n          setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]]);\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  const checkDeselect = e => {\n    // deselect when clicked on empty area\n    const clickedOnEmpty = e.target === e.target.getStage();\n    if (clickedOnEmpty) {\n      setSelectedId(null);\n    }\n  };\n  // return guidelines\n  var returnGuideLines = color => {\n    let guideLinesToReturn = [];\n    for (let index = 0; index < XGuideLines.length; index++) {\n      guideLinesToReturn.push( /*#__PURE__*/_jsxDEV(Line, {\n        stroke: \"#3498db\",\n        dash: [5, 5],\n        strokeWidth: 1,\n        points: XGuideLines[index]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this));\n    }\n    return guideLinesToReturn;\n  };\n  // adding element to the board, it seralized ofc\n  const addElement = element => {\n    if (element.type == \"text\") {\n      let elementToAdd = {\n        id: Math.floor(Math.random() * 10000),\n        type: element.type,\n        x: 20,\n        y: 20,\n        width: element.width,\n        height: element.height,\n        text: element.text,\n        align: element.align,\n        fontFamily: element.fontFamily,\n        fontSize: element.fontSize,\n        fontStyle: element.fontStyle\n      };\n      setElements(elements.concat(elementToAdd));\n    }\n    if (element.type == \"image\") {\n      let elementToAdd = {\n        id: Math.floor(Math.random() * 10000),\n        type: element.type,\n        x: 20,\n        y: 20,\n        src: element.src,\n        width: element.width,\n        height: element.height\n      };\n      setElements(elements.concat(elementToAdd));\n      setIsDragging(true);\n    }\n    if (element.type == \"rectangle\") {\n      let elementToAdd = {\n        id: Math.floor(Math.random() * 10000),\n        type: element.type,\n        x: 20,\n        y: 20,\n        width: element.width,\n        height: element.height,\n        fill: element.fill,\n        fillPatternImage: element.fillPatternImage,\n        fillPatternOffsetX: element.fillPatternOffsetX,\n        fillPatternOffsetY: element.fillPatternOffsetY,\n        isLocked: element.isLocked,\n        opacity: element.opacity\n      };\n      setElements(elements.concat(elementToAdd));\n      setIsDragging(true);\n    }\n    if (element.type == \"circle\") {\n      let elementToAdd = {\n        id: Math.floor(Math.random() * 10000),\n        type: element.type,\n        x: 20,\n        y: 20,\n        width: element.width,\n        height: element.height,\n        fill: element.fill,\n        fillPatternImage: element.fillPatternImage,\n        fillPatternOffsetX: element.fillPatternOffsetX,\n        fillPatternOffsetY: element.fillPatternOffsetY,\n        isLocked: element.isLocked\n      };\n      setElements(elements.concat(elementToAdd));\n      setIsDragging(true);\n    }\n    if (element.type == \"path\") {\n      let elementToAdd = {\n        id: Math.floor(Math.random() * 10000),\n        type: element.type,\n        x: 20,\n        y: 20,\n        width: element.width,\n        height: element.height,\n        scaleX: element.scaleX,\n        scaleY: element.scaleY,\n        fill: element.fill,\n        data: element.data,\n        fillPatternImage: element.fillPatternImage,\n        fillPatternOffsetX: element.fillPatternOffsetX,\n        fillPatternOffsetY: element.fillPatternOffsetY,\n        isLocked: element.isLocked\n      };\n      setElements(elements.concat(elementToAdd));\n      setIsDragging(true);\n    }\n  };\n  // adding element to the board, it seralized ofc\n  const exportWork = () => {\n    var Json = JSON.stringify(elements);\n    return Json;\n  };\n  // Edit an element using its id in the elements array\n  const editPositionOfElement = (elementId, event) => {\n    elements.forEach(el => {\n      if (el.id == elementId) {\n        el.x = event.target.x();\n        el.y = event.target.y();\n        el.rotation = event.target.rotation();\n      }\n    });\n    setIsDragging(!isDragging);\n    setElements(elements);\n  };\n  // Edit the with and the height of a specefic element\n  const editDimensionsOfElement = (elementId, width, height) => {\n    // we will reset it back\n    elements.forEach(el => {\n      if (el.id == elementId) {\n        el.width = width;\n        el.height = height;\n        setElements([...elements]);\n      }\n    });\n  };\n  const editDimensionsOfPath = (elementId, scaleX, scaleY) => {\n    // we will reset it back\n    elements.forEach(el => {\n      if (el.id == elementId) {\n        el.scaleX = scaleX;\n        el.scaleY = scaleY;\n        setElements([...elements]);\n      }\n    });\n  };\n  const editBackgroundOfRectangle = (elementid, src) => {\n    var tempArray = elements;\n    tempArray[elementid].fillPatternImage = src;\n    tempArray[elementid].fill = null;\n    setElements([...tempArray]);\n  };\n  ////  \n  const editImageElement = (fieldName, value) => {\n    var pos = null;\n    var tempArray = elements;\n    switch (fieldName) {\n      case \"font\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fontFamily = value;\n          }\n        });\n        break;\n      case \"fontWeight\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fontStyle = value;\n          }\n        });\n        break;\n      case \"radius\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.cornerRadius = value;\n          }\n        });\n        break;\n      case \"strokeWidth\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.strokeWidth = value;\n          }\n        });\n        break;\n      case \"bgRotation\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fillPatternRotation = value;\n          }\n        });\n        break;\n      case \"strokeColor\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.strokeColor = value;\n          }\n        });\n        break;\n      case \"opacity\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.opacity = value;\n          }\n        });\n        break;\n      case \"bgOffsetX\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fillPatternOffsetX = value;\n          }\n        });\n        break;\n      case \"bgOffsetY\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fillPatternOffsetY = value;\n          }\n        });\n        break;\n      case \"bgScale\":\n        // console.log(\"bgScale\"+value);\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fillPatternScaleY = value;\n            el.fillPatternScaleX = value;\n          }\n        });\n        break;\n      case \"text\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.text = value;\n          }\n        });\n        break;\n      case \"align\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.align = value;\n          }\n        });\n        break;\n      case \"fontColor\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fill = selectedColor;\n          }\n        });\n        break;\n      case \"fontsize\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.fontSize = value;\n          }\n        });\n        break;\n      case \"posX\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.x = value;\n          }\n        });\n        break;\n      case \"posY\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.y = value;\n          }\n        });\n        break;\n      case \"rotate\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.rotation = value;\n          }\n        });\n        break;\n      case \"width\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.width = value;\n          }\n        });\n        break;\n      case \"height\":\n        tempArray.forEach(el => {\n          if (el.id == selectedId) {\n            el.height = value;\n          }\n        });\n        break;\n    }\n    setElements([...tempArray]);\n  };\n  /// Hadling the click of locking button and lock the selected shape shape\n  const handleLockClick = () => {\n    var tempArray = elements;\n    tempArray[selectedElementArrayIndex].isLocked = !tempArray[selectedElementArrayIndex].isLocked;\n    setElements([...tempArray]);\n  };\n  /// Hadling the click of locking button and lock the selected shape shape\n  const handleDuplicateClick = async () => {\n    var tempArray = elements;\n    /// We get the position of the element we want\n    var tempElement = elements[selectedElementArrayIndex];\n    tempElement.id = Math.floor(Math.random() * 10000);\n    addElement(tempElement);\n  };\n  /// Export stage \n  const exportStage = () => {\n    var dataUrl;\n    dataUrl = stageRef.current.toDataURL({\n      pixelRatio: 1\n    });\n    downloadjs(dataUrl, \"image.png\");\n    axios.post(conf.endPoint + '/api/template/download');\n  };\n  // set custom dimentions\n  const setCustomDimentions = (width, height) => {\n    // console.log(`Width is ${width} and height is ${height}`);\n    setStageDimensions({\n      width: height,\n      height: width\n    });\n    setxSnapPoints([...[0, height / 2, height]]);\n    setisModalShowed(false);\n  };\n  const MoveUp = id => {\n    let pos = null;\n    // find the index of the id that we want to move up\n    for (let index = 0; index < elements.length; index++) {\n      if (elements[index].id == id) {\n        pos = index;\n      }\n    }\n    // if the id not found \n    if (pos == null || pos >= elements.length - 1) return;\n    var tempElements = elements;\n    let tempHolder = tempElements[pos];\n    tempElements[pos] = tempElements[pos + 1];\n    tempElements[pos + 1] = tempHolder;\n    setElements([...tempElements]);\n  };\n  const MoveDown = id => {\n    let pos = null;\n    // find the index of the id that we want to move up\n    for (let index = 0; index < elements.length; index++) {\n      if (elements[index].id == id) {\n        pos = index;\n      }\n    }\n    // if the id not found \n    if (pos == null || pos == 0) return;\n    var tempElements = elements;\n    let tempHolder = tempElements[pos];\n    tempElements[pos] = tempElements[pos - 1];\n    tempElements[pos - 1] = tempHolder;\n    setElements([...tempElements]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      setisModalShowed: setisModalShowed,\n      MoveUp: MoveUp,\n      MoveDown: MoveDown,\n      setisAddImageShowed: setisAddImageShowed,\n      handleTemplateClickEditor: handleTemplateClickEditor,\n      selectedId: selectedId,\n      editBackgroundOfRectangle: editBackgroundOfRectangle,\n      exportWork: exportWork,\n      elements: elements,\n      selectedElementArrayIndex: selectedElementArrayIndex,\n      addElement: addElement\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editor__workarea\",\n      children: [isModalShowed && /*#__PURE__*/_jsxDEV(Modal, {\n        type: \"Size\",\n        setCustomDimentions: setCustomDimentions,\n        setisModalShowed: setisModalShowed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 27\n      }, this), isAddImageShowed && /*#__PURE__*/_jsxDEV(Modal, {\n        editBackgroundOfRectangle: editBackgroundOfRectangle,\n        selectedElementArrayIndex: selectedElementArrayIndex,\n        elements: elements,\n        selectedId: selectedId,\n        addElement: addElement,\n        type: \"Image\",\n        setisAddImageShowed: setisAddImageShowed,\n        setCustomDimentions: setCustomDimentions,\n        setisModalShowed: setisModalShowed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 30\n      }, this), isExportShowed && /*#__PURE__*/_jsxDEV(Modal, {\n        selectedTemplatePlan: selectedTemplatePlan,\n        exportWork: exportWork,\n        exportStage: exportStage,\n        setIsExportShowed: setIsExportShowed,\n        monthly: props.monthly,\n        plan: props.user.plan,\n        type: \"export\",\n        setIsExportShowed: setIsExportShowed,\n        setisModalShowed: setisModalShowed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 28\n      }, this), isImportShowed && /*#__PURE__*/_jsxDEV(Modal, {\n        loadFromJson: loadFromJson,\n        selectedTemplatePlan: selectedTemplatePlan,\n        exportWork: exportWork,\n        exportStage: exportStage,\n        setIsExportShowed: setIsExportShowed,\n        monthly: props.monthly,\n        plan: props.user.plan,\n        type: \"import\",\n        setIsExportShowed: setIsExportShowed,\n        setisImportShowed: setisImportShowed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor__tooltiphover\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editor__loading\",\n          ref: LoadingRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setSelectedId(null);\n            setIsExportShowed(true);\n          },\n          className: \"duplicate\",\n          children: \"Export\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setisImportShowed(true);\n          },\n          className: \"duplicate\",\n          children: \"Import\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            handleMenuClick();\n          },\n          className: \"duplicate property\",\n          children: \"Properties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setisModalShowed(true);\n          },\n          className: \"duplicate\",\n          children: \"Dimensions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          transform: zoom >= 100 ? \"scale(\" + zoom.toString().substring(0, 1) + \".\" + zoom.toString().substring(1, 2) + \")\" : \"scale(0.\" + zoom.toString().substring(0, 1) + \")\"\n        },\n        className: \"editor__presentation\",\n        children: /*#__PURE__*/_jsxDEV(Stage, {\n          ref: stageRef,\n          width: stageDimensions.width,\n          height: stageDimensions.height,\n          onMouseDown: checkDeselect,\n          onTouchStart: checkDeselect,\n          onClick: () => {\n            var index = 0;\n            elements.forEach(el => {\n              if (el.id == selectedId) {\n                setSelectedElementArrayIndex(index);\n                setselectedLockedStatus(el.isLocked);\n              }\n              index++;\n            });\n          },\n          onTap: () => {\n            var index = 0;\n            elements.forEach(el => {\n              if (el.id == selectedId) {\n                setSelectedElementArrayIndex(index);\n              }\n              index++;\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(Layer, {\n            width: stageDimensions.width,\n            height: stageDimensions.height,\n            onDragEnd: event => {\n              setXguideLines([]);\n            },\n            onDragMove: event => {\n              // console.log(event.target.getClientRect().x + event.target.getClientRect().width);\n              setXguideLines([]);\n              for (let index = 0; index < xSnapPoints.length; index++) {\n                /////////// We check the points of the workspace /////////////////\n                // We check with  of the start of X of the object\n                if (event.target.x() >= 0 && event.target.x() <= 3) {\n                  event.target.x(0);\n                  var newXGuidelines = XGuideLines;\n                  newXGuidelines.push([0, 0, 0, stageDimensions.height]);\n                  setXguideLines([...newXGuidelines]);\n                }\n                // We check with  of the end of X of the object\n                if (event.target.x() + event.target.getClientRect().width >= xSnapPoints[index] - 3 && event.target.x() + event.target.getClientRect().width <= xSnapPoints[index] + 3) {\n                  event.target.x(xSnapPoints[index] - event.target.getClientRect().width);\n                  var newXGuidelines = XGuideLines;\n                  newXGuidelines.push([xSnapPoints[index], 0, xSnapPoints[index], stageDimensions.height]);\n                  setXguideLines([...newXGuidelines]);\n                }\n                // We check with the center of the X of object\n                if (event.target.x() + event.target.getClientRect().width / 2 >= xSnapPoints[index] - 3 && event.target.x() + event.target.getClientRect().width / 2 <= xSnapPoints[index] + 3) {\n                  event.target.x(xSnapPoints[index] - event.target.getClientRect().width / 2);\n                  var newXGuidelines = XGuideLines;\n                  newXGuidelines.push([xSnapPoints[index], 0, xSnapPoints[index], stageDimensions.height]);\n                  setXguideLines([...newXGuidelines]);\n                }\n              }\n              //////////////////////// End of checking the points of workspace down below we check other shapes points to snap into them\n              for (let index = 0; index < elements.length; index++) {\n                if (elements[index].name !== event.target.name()) {\n                  // Center\n                  if (event.target.x() + event.target.getClientRect().width / 2 >= elements[index].x - 3 && event.target.x() + event.target.getClientRect().width / 2 <= elements[index].x + 3) {\n                    event.target.x(elements[index].x - event.target.getClientRect().width / 2);\n                    var newXGuidelines = XGuideLines;\n                    newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height]);\n                    setXguideLines([...newXGuidelines]);\n                  }\n                  // End of target with the first of other objects\n                  if (event.target.x() + event.target.getClientRect().width >= elements[index].x - 3 && event.target.x() + event.target.getClientRect().width <= elements[index].x + 3) {\n                    event.target.x(elements[index].x - event.target.getClientRect().width);\n                    var newXGuidelines = XGuideLines;\n                    newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height]);\n                    setXguideLines([...newXGuidelines]);\n                  }\n                  // End of target with the end of other objects\n                  if (event.target.x() + event.target.getClientRect().width >= elements[index].x - 3 && event.target.x() + event.target.getClientRect().width <= elements[index].x + 3) {\n                    event.target.x(elements[index].x - event.target.getClientRect().width);\n                    var newXGuidelines = XGuideLines;\n                    newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height]);\n                    setXguideLines([...newXGuidelines]);\n                  }\n                }\n              }\n            },\n            children: [isDragging == true && returnGuideLines(), returnElements(elements, setIsDragging, editPositionOfElement, selectedId, setSelectedId, editDimensionsOfElement, editDimensionsOfPath, stageDimensions, stageRef, layerRef)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ZoomController, {\n        setzoom: setzoom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ElementConfig, {\n      handleMenuClick: handleMenuClick,\n      isMobileShowed: isMobileShowed,\n      setselectedColor: setselectedColor,\n      setIsDragging: setIsDragging,\n      elements: elements,\n      selectedElementArrayIndex: selectedElementArrayIndex,\n      editImageElement: editImageElement\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"elementConfig__Placeholder\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 537,\n    columnNumber: 5\n  }, this);\n};\n_s(Editor, \"cdMlhrNT7yEaKI5HNeZnna6tZQg=\", false, function () {\n  return [useParams, useKeypress];\n});\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useState","useEffect","axios","Sidebar","Stage","Layer","Text","Line","returnElements","WebFont","Modal","useKeypress","ElementConfig","ZoomController","downloadjs","useParams","conf","jsxDEV","_jsxDEV","Editor","props","_s","id","stageRef","useRef","layerRef","LoadingRef","isDragging","setIsDragging","selectedId","setSelectedId","selectedColor","setselectedColor","selectedLockedStatus","setselectedLockedStatus","zoom","setzoom","selectedElementArrayIndex","setSelectedElementArrayIndex","stageDimensions","setStageDimensions","width","height","XGuideLines","setXguideLines","xSnapPoints","setxSnapPoints","elements","setElements","isMobileShowed","setisMobileShowed","isImportShowed","setisImportShowed","selectedTemplatePlan","setselectedTemplatePlan","isModalShowed","setisModalShowed","isAddImageShowed","setisAddImageShowed","isExportShowed","setIsExportShowed","sizes","fbPost","twPost","inPost","youtubeThumbnail","post","endPoint","data","name","replace","withCredentials","then","resp","status","plan","loadFromJson","JSON","parse","json","platform","dim","size","split","handleMenuClick","state","textJson","fonts","parsedElements","setTimeout","forEach","element","type","push","fontFamily","length","load","google","families","removeElementById","pos","index","tempArray","splice","handleTemplateClickEditor","checkDeselect","e","clickedOnEmpty","target","getStage","returnGuideLines","color","guideLinesToReturn","stroke","dash","strokeWidth","points","fileName","_jsxFileName","lineNumber","columnNumber","addElement","elementToAdd","Math","floor","random","x","y","text","align","fontSize","fontStyle","concat","src","fill","fillPatternImage","fillPatternOffsetX","fillPatternOffsetY","isLocked","opacity","scaleX","scaleY","exportWork","Json","stringify","editPositionOfElement","elementId","event","el","rotation","editDimensionsOfElement","editDimensionsOfPath","editBackgroundOfRectangle","elementid","editImageElement","fieldName","value","cornerRadius","fillPatternRotation","strokeColor","fillPatternScaleY","fillPatternScaleX","handleLockClick","handleDuplicateClick","tempElement","exportStage","dataUrl","current","toDataURL","pixelRatio","setCustomDimentions","MoveUp","tempElements","tempHolder","MoveDown","className","children","monthly","user","ref","onClick","style","transform","toString","substring","onMouseDown","onTouchStart","onTap","onDragEnd","onDragMove","newXGuidelines","getClientRect","_c","$RefreshReg$"],"sources":["/home/meparth/kn-projekt/Frontend/src/Components/Editor/Editor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport './Editor.scss'\r\nimport Sidebar from './Sidebar';\r\n// Konva\r\nimport { Stage, Layer, Text, Line } from 'react-konva';\r\nimport { returnElements } from './utils';\r\nimport WebFont from 'webfontloader';\r\n// Lottie\r\nimport Modal from \"./Modal/Modal\"\r\n// Handling key press \r\nimport useKeypress from 'react-use-keypress';\r\nimport ElementConfig from './ElementConfig';\r\nimport ZoomController from './ZoomController/ZoomController';\r\nimport downloadjs from 'downloadjs'\r\nimport { useParams } from 'react-router';\r\nimport { conf } from '../../conf/conf';\r\n\r\n\r\nconst Editor = (props) => {\r\n  // Editor initalisation \r\n  let { id } = useParams();\r\n  ////// Refs \r\n  const stageRef = React.useRef();\r\n  const layerRef = React.useRef();\r\n  const LoadingRef = React.useRef();\r\n  ////// States\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [selectedId, setSelectedId] = useState(null)\r\n  const [selectedColor, setselectedColor] = useState(\"black\")\r\n  const [selectedLockedStatus, setselectedLockedStatus] = useState(false)\r\n  const [zoom, setzoom] = useState(60)\r\n  const [selectedElementArrayIndex, setSelectedElementArrayIndex] = useState(null)\r\n  const [stageDimensions, setStageDimensions] = useState({ width: 0, height: 0 })\r\n  const [XGuideLines, setXguideLines] = useState([]);\r\n  const [xSnapPoints, setxSnapPoints] = useState([]);\r\n  const [elements, setElements] = useState([]);\r\n  const [isMobileShowed, setisMobileShowed] = useState(false)\r\n  const [isImportShowed, setisImportShowed] = useState(false)\r\n  const [selectedTemplatePlan, setselectedTemplatePlan] = useState()\r\n  // Modals\r\n  const [isModalShowed, setisModalShowed] = useState(false);\r\n  const [isAddImageShowed, setisAddImageShowed] = useState(false);\r\n  const [isExportShowed, setIsExportShowed] = useState(false);\r\n  const sizes = {\r\n    fbPost: { width: 1200, height: 630 },\r\n    twPost: { width: 1200, height: 675 },\r\n    inPost: { width: 1080, height: 1080 },\r\n    youtubeThumbnail: { width: 1280, height: 720 },\r\n  }\r\n  useEffect(\r\n    () => {\r\n      // console.log('aralna l user');\r\n      // console.log(props.user);\r\n      axios.post(conf.endPoint + \"/api/templates/return/editor\", { data: { name: id.replace(\"_\", ' ') } }, { withCredentials: true }).then((resp) => {\r\n        if (resp.data) {\r\n          if (resp.data.status == false) {\r\n            setIsExportShowed(true)\r\n            setselectedTemplatePlan('Premium')\r\n          } else {\r\n            setselectedTemplatePlan(resp.data.plan)\r\n          }\r\n          loadFromJson(JSON.parse(resp.data.json))\r\n          switch (resp.data.platform) {\r\n            case \"Facebook Post\":\r\n              setStageDimensions({ width: sizes.fbPost.width, height: sizes.fbPost.height })\r\n              setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]])\r\n              break;\r\n            case \"Instagram Post\":\r\n              setStageDimensions({ width: sizes.inPost.width, height: sizes.inPost.height })\r\n              setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]])\r\n              break;\r\n            case \"Twitter Post\":\r\n              setStageDimensions({ width: sizes.twPost.width, height: sizes.twPost.height })\r\n              setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]])\r\n              break;\r\n            case \"Youtube Thumbnail\":\r\n              setStageDimensions({ width: sizes.youtubeThumbnail.width, height: sizes.youtubeThumbnail.height })\r\n              setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]])\r\n              break;\r\n            case \"Custom\":\r\n              var dim = resp.data.size.split('x')\r\n              setStageDimensions({ width: dim[0], height: dim[1] })\r\n              setxSnapPoints([...[0, dim[0] / 2, dim[0]]])\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      })\r\n      //  loadFromJson([{\"id\":7513,\"type\":\"path\",\"x\":576.65959092502,\"y\":139.7537890521899,\"width\":50,\"height\":50,\"scaleX\":1.5313825642263001,\"scaleY\":1.5313825642262986,\"fill\":\"rgba(255,207,67,1)\",\"data\":\"M171.647,2.874L169.3,0L36.582,176.082l-1.414,1.861l142.007,168.378l0.664,0.792l132.685-178.324l1.423-1.853L171.647,2.874z\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"rotation\":-6.103054675504172},{\"id\":243,\"type\":\"path\",\"x\":1406.9999394376464,\"y\":-604.910131004434,\"width\":50,\"height\":50,\"scaleX\":2.3857610598660886,\"scaleY\":2.3857610598660837,\"fill\":\"rgba(255,207,69,1)\",\"data\":\"M171.647,2.874L169.3,0L36.582,176.082l-1.414,1.861l142.007,168.378l0.664,0.792l132.685-178.324l1.423-1.853L171.647,2.874z\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"rotation\":82.07504271837227},{\"id\":3021,\"type\":\"path\",\"x\":520.7322504750741,\"y\":-248.35465754110692,\"width\":50,\"height\":50,\"scaleX\":2.1303857247659774,\"scaleY\":2.130385724765978,\"fill\":null,\"data\":\"M507.52,427.39,282.65,52.62a31.09,31.09,0,0,0-53.31,0L4.48,427.39C-7.95,448.11,7,474.47,31.13,474.47H480.87C505,474.47,520,448.11,507.52,427.39Z\",\"fillPatternImage\":\"/static/media/image1.8d246ba4.jpg\",\"fillPatternOffsetX\":13,\"fillPatternOffsetY\":-248,\"isLocked\":true,\"rotation\":0,\"fillPatternScaleY\":0.4,\"fillPatternScaleX\":0.4},{\"id\":5085,\"type\":\"text\",\"x\":33.33333333333334,\"y\":154.99999999999994,\"width\":275,\"height\":46.66666666666665,\"text\":\"We Are\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":40,\"fontStyle\":400,\"rotation\":0},{\"id\":6054,\"type\":\"text\",\"x\":35.00000000000003,\"y\":201.66666666666674,\"width\":275,\"height\":59.99999999999987,\"text\":\"Digital\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":600,\"rotation\":0},{\"id\":5421,\"type\":\"text\",\"x\":33.33333333333334,\"y\":261.6666666666667,\"width\":348.3333333333334,\"height\":59.99999999999986,\"text\":\"Marketing\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":700,\"rotation\":0,\"fill\":\"rgba(254,204,50,1)\"},{\"id\":3328,\"type\":\"text\",\"x\":35,\"y\":318.33333333333337,\"width\":275,\"height\":59.99999999999987,\"text\":\"Experts\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":52,\"fontStyle\":600,\"rotation\":0,\"fill\":\"rgba(0,0,0,1)\"},{\"id\":2354,\"type\":\"image\",\"x\":68.33333333333343,\"y\":39.46219929273235,\"src\":\"/static/media/sound-waves.bc89fc35.svg\",\"width\":40.252857818252174,\"height\":40.252857818252174,\"rotation\":0},{\"id\":9462,\"type\":\"text\",\"x\":123.33333333333323,\"y\":45,\"width\":135.0000000000002,\"height\":28.33333333333309,\"text\":\"Agency\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":29,\"fontStyle\":600,\"rotation\":0},{\"id\":351,\"type\":\"rectangle\",\"x\":41.39617789775846,\"y\":397.59745193183886,\"width\":154.90254806816114,\"height\":48.65254806816108,\"fill\":\"rgba(254,204,50,1)\",\"fillPatternImage\":null,\"fillPatternOffsetX\":null,\"fillPatternOffsetY\":null,\"isLocked\":false,\"opacity\":1,\"rotation\":0},{\"id\":8682,\"type\":\"text\",\"x\":45.00000000000007,\"y\":409.9999999999992,\"width\":148.75000000000003,\"height\":45.41666666666678,\"text\":\"Join us\",\"align\":\"center\",\"fontFamily\":\"Poppins\",\"fontSize\":23,\"fontStyle\":600,\"rotation\":0},{\"id\":8649,\"type\":\"text\",\"x\":37.9583333333332,\"y\":480.0000000000002,\"width\":290.0000000000001,\"height\":45.41666666666677,\"text\":\"www.yourdomain.com\",\"align\":\"left\",\"fontFamily\":\"Poppins\",\"fontSize\":20,\"fontStyle\":500,\"rotation\":0}])\r\n      switch (id) {\r\n        case \"Facebook_Post\":\r\n          setStageDimensions({ width: sizes.fbPost.width, height: sizes.fbPost.height })\r\n          setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]])\r\n          break;\r\n        case \"Instagram_Post\":\r\n          setStageDimensions({ width: sizes.inPost.width, height: sizes.inPost.height })\r\n          setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]])\r\n          break;\r\n        case \"Twitter_Post\":\r\n          setStageDimensions({ width: sizes.twPost.width, height: sizes.twPost.height })\r\n          setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]])\r\n          break;\r\n        case \"Youtube_Thumbnail\":\r\n          setStageDimensions({ width: sizes.youtubeThumbnail.width, height: sizes.youtubeThumbnail.height })\r\n          setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]])\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    , []);\r\n  const handleMenuClick = () => {\r\n    setisMobileShowed(state => !state)\r\n  }\r\n  const loadFromJson = (textJson) => {\r\n    var fonts = []\r\n    var parsedElements = textJson;\r\n    setTimeout(() => {\r\n      setElements([...parsedElements])\r\n    }, 800);\r\n    // After we set template from json we need  to loop throu its fonts and load hem \r\n    parsedElements.forEach(element => {\r\n      if (element.type == \"text\") {\r\n        fonts.push(element.fontFamily)\r\n      }\r\n    })\r\n    if (fonts.length > 0)\r\n      WebFont.load({\r\n        google: {\r\n          families: fonts\r\n        }\r\n      });\r\n  }\r\n  useKeypress('Delete', () => {\r\n    removeElementById(selectedId)\r\n  });\r\n  const removeElementById = (id) => {\r\n    var pos = null;\r\n    for (let index = 0; index < elements.length; index++) {\r\n      if (id === elements[index].id) {\r\n        pos = index\r\n      }\r\n    }\r\n    if (pos !== null) {\r\n      var tempArray = elements;\r\n      tempArray.splice(pos, 1)\r\n      setElements([...tempArray])\r\n    }\r\n  }\r\n  // Handle template click and show it \r\n  const handleTemplateClickEditor = (name) => {\r\n    axios.post(conf.endPoint + \"/api/templates/return/editor\", { data: { name: name } }, { withCredentials: true }).then((resp) => {\r\n      if (resp.data.status == false) {\r\n        setselectedTemplatePlan('Premium')\r\n        setIsExportShowed(true)\r\n      }\r\n      loadFromJson(JSON.parse(resp.data.json))\r\n      setselectedTemplatePlan(resp.data.plan)\r\n      switch (resp.data.platform) {\r\n        case \"Facebook Post\":\r\n          setStageDimensions({ width: sizes.fbPost.width, height: sizes.fbPost.height })\r\n          setxSnapPoints([...[0, sizes.fbPost.width / 2, sizes.fbPost.width]])\r\n          break;\r\n        case \"Instagram Post\":\r\n          setStageDimensions({ width: sizes.inPost.width, height: sizes.inPost.height })\r\n          setxSnapPoints([...[0, sizes.inPost.width / 2, sizes.inPost.width]])\r\n          break;\r\n        case \"Twitter Post\":\r\n          setStageDimensions({ width: sizes.twPost.width, height: sizes.twPost.height })\r\n          setxSnapPoints([...[0, sizes.twPost.width / 2, sizes.twPost.width]])\r\n          break;\r\n        case \"Youtube Thumbnail\":\r\n          setStageDimensions({ width: sizes.youtubeThumbnail.width, height: sizes.youtubeThumbnail.height })\r\n          setxSnapPoints([...[0, sizes.youtubeThumbnail.width / 2, sizes.youtubeThumbnail.width]])\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n  }\r\n  const checkDeselect = (e) => { \r\n    // deselect when clicked on empty area\r\n    const clickedOnEmpty = e.target === e.target.getStage();\r\n    if (clickedOnEmpty) {\r\n      setSelectedId(null);\r\n    }\r\n  };\r\n  // return guidelines\r\n  var returnGuideLines = (color) => {\r\n    let guideLinesToReturn = []\r\n    for (let index = 0; index < XGuideLines.length; index++) {\r\n      guideLinesToReturn.push(\r\n        <Line stroke=\"#3498db\" dash={[5, 5]} strokeWidth={1} points={XGuideLines[index]} />\r\n      )\r\n    }\r\n    return guideLinesToReturn;\r\n  }\r\n  // adding element to the board, it seralized ofc\r\n  const addElement = (element) => {\r\n    if (element.type == \"text\") {\r\n      let elementToAdd = {\r\n        id: Math.floor(Math.random() * 10000),\r\n        type: element.type,\r\n        x: 20,\r\n        y: 20,\r\n        width: element.width,\r\n        height: element.height,\r\n        text: element.text,\r\n        align: element.align,\r\n        fontFamily: element.fontFamily,\r\n        fontSize: element.fontSize,\r\n        fontStyle: element.fontStyle\r\n      }\r\n      setElements(elements.concat(elementToAdd))\r\n    }\r\n    if (element.type == \"image\") {\r\n      let elementToAdd = {\r\n        id: Math.floor(Math.random() * 10000),\r\n        type: element.type,\r\n        x: 20,\r\n        y: 20,\r\n        src: element.src,\r\n        width: element.width,\r\n        height: element.height,\r\n      }\r\n      setElements(elements.concat(elementToAdd))\r\n      setIsDragging(true)\r\n    }\r\n    if (element.type == \"rectangle\") {\r\n      let elementToAdd = {\r\n        id: Math.floor(Math.random() * 10000),\r\n        type: element.type,\r\n        x: 20,\r\n        y: 20,\r\n        width: element.width,\r\n        height: element.height,\r\n        fill: element.fill,\r\n        fillPatternImage: element.fillPatternImage,\r\n        fillPatternOffsetX: element.fillPatternOffsetX,\r\n        fillPatternOffsetY: element.fillPatternOffsetY,\r\n        isLocked: element.isLocked,\r\n        opacity: element.opacity\r\n      }\r\n      setElements(elements.concat(elementToAdd))\r\n      setIsDragging(true)\r\n    }\r\n    if (element.type == \"circle\") {\r\n      let elementToAdd = {\r\n        id: Math.floor(Math.random() * 10000),\r\n        type: element.type,\r\n        x: 20,\r\n        y: 20,\r\n        width: element.width,\r\n        height: element.height,\r\n        fill: element.fill,\r\n        fillPatternImage: element.fillPatternImage,\r\n        fillPatternOffsetX: element.fillPatternOffsetX,\r\n        fillPatternOffsetY: element.fillPatternOffsetY,\r\n        isLocked: element.isLocked\r\n      }\r\n      setElements(elements.concat(elementToAdd))\r\n      setIsDragging(true)\r\n    }\r\n    if (element.type == \"path\") {\r\n      let elementToAdd = {\r\n        id: Math.floor(Math.random() * 10000),\r\n        type: element.type,\r\n        x: 20,\r\n        y: 20,\r\n        width: element.width,\r\n        height: element.height,\r\n        scaleX: element.scaleX,\r\n        scaleY: element.scaleY,\r\n        fill: element.fill,\r\n        data: element.data,\r\n        fillPatternImage: element.fillPatternImage,\r\n        fillPatternOffsetX: element.fillPatternOffsetX,\r\n        fillPatternOffsetY: element.fillPatternOffsetY,\r\n        isLocked: element.isLocked\r\n      }\r\n      setElements(elements.concat(elementToAdd))\r\n      setIsDragging(true)\r\n    }\r\n  }\r\n  // adding element to the board, it seralized ofc\r\n  const exportWork = () => {\r\n    var Json = JSON.stringify(elements)\r\n    return Json\r\n  }\r\n  // Edit an element using its id in the elements array\r\n  const editPositionOfElement = (elementId, event) => {\r\n    elements.forEach((el) => {\r\n      if (el.id == elementId) {\r\n        el.x = event.target.x();\r\n        el.y = event.target.y();\r\n        el.rotation = event.target.rotation();\r\n      }\r\n    })\r\n    setIsDragging(!isDragging);\r\n    setElements(elements)\r\n  }\r\n  // Edit the with and the height of a specefic element\r\n  const editDimensionsOfElement = (elementId, width, height) => {\r\n    // we will reset it back\r\n    elements.forEach((el) => {\r\n      if (el.id == elementId) {\r\n        el.width = width\r\n        el.height = height\r\n        setElements([...elements])\r\n      }\r\n    })\r\n  }\r\n  const editDimensionsOfPath = (elementId, scaleX, scaleY) => {\r\n    // we will reset it back\r\n    elements.forEach((el) => {\r\n      if (el.id == elementId) {\r\n        el.scaleX = scaleX\r\n        el.scaleY = scaleY\r\n        setElements([...elements])\r\n      }\r\n    })\r\n  }\r\n  const editBackgroundOfRectangle = (elementid, src) => {\r\n    var tempArray = elements;\r\n    tempArray[elementid].fillPatternImage = src;\r\n    tempArray[elementid].fill = null;\r\n    setElements([...tempArray])\r\n  }\r\n  ////  \r\n  const editImageElement = (fieldName, value) => {\r\n    var pos = null;\r\n    var tempArray = elements\r\n    switch (fieldName) {\r\n      case \"font\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fontFamily = value\r\n          }\r\n        })\r\n        break;\r\n      case \"fontWeight\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fontStyle = value\r\n          }\r\n        })\r\n        break;\r\n      case \"radius\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.cornerRadius = value\r\n          }\r\n        })\r\n        break;\r\n      case \"strokeWidth\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.strokeWidth = value\r\n          }\r\n        })\r\n        break;\r\n      case \"bgRotation\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fillPatternRotation = value\r\n          }\r\n        })\r\n        break;\r\n      case \"strokeColor\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.strokeColor = value\r\n          }\r\n        })\r\n        break;\r\n      case \"opacity\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.opacity = value\r\n          }\r\n        })\r\n        break;\r\n      case \"bgOffsetX\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fillPatternOffsetX = value\r\n          }\r\n        })\r\n        break;\r\n      case \"bgOffsetY\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fillPatternOffsetY = value\r\n          }\r\n        })\r\n        break;\r\n      case \"bgScale\":\r\n        // console.log(\"bgScale\"+value);\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fillPatternScaleY = value\r\n            el.fillPatternScaleX = value\r\n          }\r\n        })\r\n        break;\r\n      case \"text\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.text = value\r\n          }\r\n        })\r\n        break;\r\n      case \"align\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.align = value\r\n          }\r\n        })\r\n        break;\r\n      case \"fontColor\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fill = selectedColor\r\n          }\r\n        })\r\n        break;\r\n      case \"fontsize\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.fontSize = value\r\n          }\r\n        })\r\n        break;\r\n      case \"posX\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.x = value\r\n          }\r\n        })\r\n        break;\r\n      case \"posY\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.y = value\r\n          }\r\n        })\r\n        break;\r\n      case \"rotate\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.rotation = value\r\n          }\r\n        })\r\n        break;\r\n      case \"width\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.width = value\r\n          }\r\n        })\r\n        break;\r\n      case \"height\":\r\n        tempArray.forEach((el) => {\r\n          if (el.id == selectedId) {\r\n            el.height = value\r\n          }\r\n        })\r\n        break;\r\n    }\r\n    setElements([...tempArray])\r\n  }\r\n  /// Hadling the click of locking button and lock the selected shape shape\r\n  const handleLockClick = () => {\r\n    var tempArray = elements\r\n    tempArray[selectedElementArrayIndex].isLocked = !tempArray[selectedElementArrayIndex].isLocked;\r\n    setElements([...tempArray])\r\n  }\r\n  /// Hadling the click of locking button and lock the selected shape shape\r\n  const handleDuplicateClick = async () => {\r\n    var tempArray = elements;\r\n    /// We get the position of the element we want\r\n    var tempElement = elements[selectedElementArrayIndex];\r\n    tempElement.id = Math.floor(Math.random() * 10000);\r\n    addElement(tempElement)\r\n  }\r\n  /// Export stage \r\n  const exportStage = () => {\r\n    var dataUrl;\r\n    dataUrl = stageRef.current.toDataURL({ pixelRatio: 1 })\r\n    downloadjs(dataUrl, \"image.png\")\r\n    axios.post(conf.endPoint + '/api/template/download')\r\n  }\r\n  // set custom dimentions\r\n  const setCustomDimentions = (width, height) => {\r\n    // console.log(`Width is ${width} and height is ${height}`);\r\n    setStageDimensions({ width: height, height: width })\r\n    setxSnapPoints([...[0, height / 2, height]])\r\n    setisModalShowed(false)\r\n  }\r\n  const MoveUp = (id) => {\r\n    let pos = null;\r\n    // find the index of the id that we want to move up\r\n    for (let index = 0; index < elements.length; index++) {\r\n      if (elements[index].id == id) {\r\n        pos = index;\r\n      }\r\n    }\r\n    // if the id not found \r\n    if (pos == null || pos >= elements.length - 1)\r\n      return\r\n    var tempElements = elements;\r\n    let tempHolder = tempElements[pos]\r\n    tempElements[pos] = tempElements[pos + 1]\r\n    tempElements[pos + 1] = tempHolder\r\n    setElements([...tempElements])\r\n  }\r\n  const MoveDown = (id) => {\r\n    let pos = null;\r\n    // find the index of the id that we want to move up\r\n    for (let index = 0; index < elements.length; index++) {\r\n      if (elements[index].id == id) {\r\n        pos = index;\r\n      }\r\n    }\r\n    // if the id not found \r\n    if (pos == null || pos == 0)\r\n      return\r\n    var tempElements = elements;\r\n    let tempHolder = tempElements[pos]\r\n    tempElements[pos] = tempElements[pos - 1]\r\n    tempElements[pos - 1] = tempHolder\r\n    setElements([...tempElements])\r\n  }\r\n  return (\r\n    <div className=\"editor\">\r\n      {/* left sidebar */}\r\n      <Sidebar setisModalShowed={setisModalShowed} MoveUp={MoveUp} MoveDown={MoveDown} setisAddImageShowed={setisAddImageShowed} handleTemplateClickEditor={handleTemplateClickEditor} selectedId={selectedId} editBackgroundOfRectangle={editBackgroundOfRectangle} exportWork={exportWork} elements={elements} selectedElementArrayIndex={selectedElementArrayIndex} addElement={addElement} />\r\n      {/*  workspace */}\r\n      <div className=\"editor__workarea\">\r\n        {isModalShowed && <Modal type=\"Size\" setCustomDimentions={setCustomDimentions} setisModalShowed={setisModalShowed} />\r\n        }\r\n        {isAddImageShowed && <Modal editBackgroundOfRectangle={editBackgroundOfRectangle} selectedElementArrayIndex={selectedElementArrayIndex} elements={elements} selectedId={selectedId} addElement={addElement} type=\"Image\" setisAddImageShowed={setisAddImageShowed} setCustomDimentions={setCustomDimentions} setisModalShowed={setisModalShowed} />\r\n        }\r\n        {isExportShowed && <Modal selectedTemplatePlan={selectedTemplatePlan} exportWork={exportWork} exportStage={exportStage} setIsExportShowed={setIsExportShowed} monthly={props.monthly} plan={props.user.plan} type=\"export\" setIsExportShowed={setIsExportShowed} setisModalShowed={setisModalShowed} />\r\n        }\r\n        {isImportShowed && <Modal loadFromJson={loadFromJson} selectedTemplatePlan={selectedTemplatePlan} exportWork={exportWork} exportStage={exportStage} setIsExportShowed={setIsExportShowed} monthly={props.monthly} plan={props.user.plan} type=\"import\" setIsExportShowed={setIsExportShowed} setisImportShowed={setisImportShowed} />\r\n        }\r\n        <div className=\"editor__tooltiphover\">\r\n          <div className=\"editor__loading\" ref={LoadingRef} ></div>\r\n          <div onClick={() => { setSelectedId(null); setIsExportShowed(true) }} className={\"duplicate\"}>\r\n            {/* exportStage() ; exportWork() */}\r\n            Export\r\n          </div>\r\n          <div onClick={() => { setisImportShowed(true) }} className={\"duplicate\"}>\r\n            {/* exportStage() ; exportWork() */}\r\n            Import\r\n          </div>\r\n          <div onClick={() => { handleMenuClick() }} className={\"duplicate property\"}>\r\n            {/* exportStage() ; exportWork() */}\r\n            Properties\r\n          </div>\r\n          <div onClick={() => { setisModalShowed(true); }} className={\"duplicate\"}>\r\n            Dimensions\r\n          </div>\r\n        </div>\r\n        <div style={{\r\n          transform:\r\n            zoom >= 100 ?\r\n              \"scale(\" + zoom.toString().substring(0, 1) + \".\" + zoom.toString().substring(1, 2) + \")\" :\r\n              \"scale(0.\" + zoom.toString().substring(0, 1) + \")\"\r\n        }} className=\"editor__presentation\">\r\n          <Stage\r\n            ref={stageRef}\r\n            width={stageDimensions.width} height={stageDimensions.height}\r\n            onMouseDown={checkDeselect}\r\n            onTouchStart={checkDeselect}\r\n            onClick={() => {\r\n              var index = 0;\r\n              elements.forEach((el) => {\r\n                if (el.id == selectedId) {\r\n                  setSelectedElementArrayIndex(index)\r\n                  setselectedLockedStatus(el.isLocked)\r\n                }\r\n                index++;\r\n              })\r\n            }}\r\n            onTap={() => {\r\n              var index = 0;\r\n              elements.forEach((el) => {\r\n                if (el.id == selectedId) {\r\n                  setSelectedElementArrayIndex(index)\r\n                }\r\n                index++;\r\n              })\r\n            }}\r\n          >\r\n            <Layer\r\n              width={stageDimensions.width} height={stageDimensions.height}\r\n              onDragEnd={(event) => {\r\n                setXguideLines([])\r\n              }}\r\n              onDragMove={(event) => {\r\n                // console.log(event.target.getClientRect().x + event.target.getClientRect().width);\r\n                setXguideLines([])\r\n                for (let index = 0; index < xSnapPoints.length; index++) {\r\n                  /////////// We check the points of the workspace /////////////////\r\n                  // We check with  of the start of X of the object\r\n                  if (event.target.x() >= 0 && event.target.x() <= 3) {\r\n                    event.target.x(0)\r\n                    var newXGuidelines = XGuideLines\r\n                    newXGuidelines.push([0, 0, 0, stageDimensions.height])\r\n                    setXguideLines([...newXGuidelines])\r\n                  }\r\n                  // We check with  of the end of X of the object\r\n                  if (event.target.x() + event.target.getClientRect().width >= xSnapPoints[index] - 3 && event.target.x() + event.target.getClientRect().width <= xSnapPoints[index] + 3) {\r\n                    event.target.x(xSnapPoints[index] - event.target.getClientRect().width)\r\n                    var newXGuidelines = XGuideLines\r\n                    newXGuidelines.push([xSnapPoints[index], 0, xSnapPoints[index], stageDimensions.height])\r\n                    setXguideLines([...newXGuidelines])\r\n                  }\r\n                  // We check with the center of the X of object\r\n                  if (event.target.x() + (event.target.getClientRect().width / 2) >= xSnapPoints[index] - 3 && event.target.x() + (event.target.getClientRect().width / 2) <= xSnapPoints[index] + 3) {\r\n                    event.target.x(xSnapPoints[index] - (event.target.getClientRect().width / 2))\r\n                    var newXGuidelines = XGuideLines\r\n                    newXGuidelines.push([xSnapPoints[index], 0, xSnapPoints[index], stageDimensions.height])\r\n                    setXguideLines([...newXGuidelines])\r\n                  }\r\n                }\r\n                //////////////////////// End of checking the points of workspace down below we check other shapes points to snap into them\r\n                for (let index = 0; index < elements.length; index++) {\r\n                  if (elements[index].name !== event.target.name()) {\r\n                    // Center\r\n                    if (event.target.x() + (event.target.getClientRect().width / 2) >= elements[index].x - 3 && event.target.x() + (event.target.getClientRect().width / 2) <= elements[index].x + 3) {\r\n                      event.target.x(elements[index].x - (event.target.getClientRect().width / 2))\r\n                      var newXGuidelines = XGuideLines\r\n                      newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height])\r\n                      setXguideLines([...newXGuidelines])\r\n                    }\r\n                    // End of target with the first of other objects\r\n                    if (event.target.x() + event.target.getClientRect().width >= elements[index].x - 3 && event.target.x() + event.target.getClientRect().width <= elements[index].x + 3) {\r\n                      event.target.x(elements[index].x - event.target.getClientRect().width)\r\n                      var newXGuidelines = XGuideLines\r\n                      newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height])\r\n                      setXguideLines([...newXGuidelines])\r\n                    }\r\n                    // End of target with the end of other objects\r\n                    if (event.target.x() + event.target.getClientRect().width >= elements[index].x - 3 && event.target.x() + event.target.getClientRect().width <= elements[index].x + 3) {\r\n                      event.target.x(elements[index].x - event.target.getClientRect().width)\r\n                      var newXGuidelines = XGuideLines\r\n                      newXGuidelines.push([elements[index].x, 0, elements[index].x, stageDimensions.height])\r\n                      setXguideLines([...newXGuidelines])\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n            >\r\n              {isDragging == true && returnGuideLines()}\r\n              {returnElements(elements, setIsDragging, editPositionOfElement, selectedId, setSelectedId, editDimensionsOfElement, editDimensionsOfPath, stageDimensions, stageRef, layerRef)}\r\n            </Layer>\r\n          </Stage>\r\n        </div>\r\n        <ZoomController setzoom={setzoom} />\r\n      </div>\r\n      <ElementConfig handleMenuClick={handleMenuClick} isMobileShowed={isMobileShowed} setselectedColor={setselectedColor} setIsDragging={setIsDragging} elements={elements} selectedElementArrayIndex={selectedElementArrayIndex} editImageElement={editImageElement} />\r\n      <div className=\"elementConfig__Placeholder\"></div>\r\n    </div>\r\n  )\r\n}\r\nexport default Editor\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}